=== TASK 09 SOLUTION: Docker Commands and Image Management ===
Date: 2026-01-03 18:15:00
Author: Developer

OBJECTIVE:
Master essential Docker commands for image management, container lifecycle, and system monitoring.

EXECUTION STEPS:

1. DOCKER SYSTEM INFORMATION
docker version
Output:
Client: Docker Engine - Community
 Version:           24.0.7
 API version:       1.43
 Go version:        go1.20.10
 ...
Server: Docker Engine - Community
 Engine:
  Version:          24.0.7
  ...

docker info
Output:
Containers: 5
 Running: 1
 Paused: 0
 Stopped: 4
Images: 15
...

2. IMAGE MANAGEMENT COMMANDS

# Pull official images
docker pull nginx:alpine
docker pull postgres:15
docker pull redis:alpine

# List all images
docker images
Output:
REPOSITORY   TAG       IMAGE ID       CREATED        SIZE
nginx        alpine    abc123...      2 weeks ago    40.5MB
postgres     15        def456...      3 weeks ago    379MB
redis        alpine    ghi789...      4 weeks ago    28.4MB

# Inspect image details
docker image inspect nginx:alpine | grep -A5 "Architecture"
Output:
        "Architecture": "amd64",
        "Os": "linux",
        "Size": 42490940,
        "VirtualSize": 42490940,

# Remove unused images
docker image prune -a --filter "until=24h" --dry-run
docker image prune -a --filter "until=24h"

3. CONTAINER LIFECYCLE COMMANDS

# Run containers with different options
docker run -d --name web1 -p 8080:80 nginx:alpine
docker run -d --name web2 -p 8081:80 -e NGINX_PORT=80 nginx:alpine

# List containers
docker ps
docker ps -a  # Show all including stopped

# Execute commands in running container
docker exec web1 nginx -v
Output:
nginx version: nginx/1.24.0

docker exec -it web1 sh
# Inside container: exit

# Stop and start containers
docker stop web1 web2
docker start web1

# Remove containers
docker rm web2
docker container prune  # Remove all stopped containers

4. MONITORING AND LOGS

# View container logs
docker logs web1
Output:
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
...

# Follow logs in real-time
# docker logs -f web1  # Ctrl+C to stop

# View container stats
docker stats --no-stream
Output:
CONTAINER ID   NAME      CPU %     MEM USAGE / LIMIT     MEM %     NET I/O       BLOCK I/O   PIDS
abc123def456   web1      0.00%     3.5MiB / 1.94GiB      0.18%     1.15kB / 0B   0B / 0B     2

# Inspect container details
docker inspect web1 | grep -A10 "NetworkSettings"
Output:
            "NetworkSettings": {
                "Bridge": "",
                "SandboxID": "xyz789...",
                "HairpinMode": false,
                "LinkLocalIPv6Address": "",
                "LinkLocalIPv6PrefixLen": 0,
                "Ports": {
                    "80/tcp": [
                        {
                            "HostIp": "0.0.0.0",
                            "HostPort": "8080"
                        }
                    ]
                },

5. SYSTEM CLEANUP

# Check disk usage before cleanup
docker system df
Output:
TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE
Images          15        3         1.2GB     800MB (66%)
Containers      5         1         120MB     120MB (100%)
Local Volumes   3         1         450MB     300MB (66%)
Build Cache     25        0         350MB     350MB

# Prune unused data
docker system prune -a --volumes --filter "until=24h"

# Check disk usage after cleanup
docker system df
Output:
TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE
Images          3         1         450MB     0B (0%)
Containers      1         1         10MB      0B (0%)
Local Volumes   1         1         150MB     0B (0%)
Build Cache     0         0         0B        0B

6. COPY FILES TO/FROM CONTAINERS

# Create test file
echo "Test content for copy" > test-file.txt

# Copy file to container
docker cp test-file.txt web1:/tmp/test-file.txt

# Verify file in container
docker exec web1 cat /tmp/test-file.txt
Output: Test content for copy

# Copy file from container
docker cp web1:/etc/nginx/nginx.conf ./nginx-copy.conf

# Clean up test file
rm test-file.txt nginx-copy.conf

7. MOST USEFUL DOCKER COMMANDS LIST

1. docker build - Build image from Dockerfile
2. docker run - Run container from image
3. docker ps - List containers (add -a for all)
4. docker images - List images
5. docker logs - View container logs
6. docker exec - Execute command in running container
7. docker stop/start/rm - Container lifecycle management
8. docker system df - Show disk usage
9. docker system prune - Clean up unused data
10. docker cp - Copy files to/from containers
11. docker inspect - View low-level information
12. docker network - Manage networks
13. docker volume - Manage volumes
14. docker stats - Monitor resource usage
15. docker history - Show image history

REQUIREMENTS MET:
- All Docker commands used with purpose: Documented above
- Output of docker system df before/after cleanup: Provided
- Examples of container inspection and logs: Provided
- List of most useful Docker commands: Provided in section 7
