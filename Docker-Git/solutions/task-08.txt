=== TASK 08 SOLUTION: Git Workflow with Multiple Remotes ===
Date: 2026-01-04 14:56:34
Author: Разработчик

OBJECTIVE:
Practice a realistic Git workflow that simulates working with pull requests and code reviews.

REQUIREMENTS COMPLETED:
1. Set up "main" repository (company repo) and "fork" repository simulation
2. Implemented feature branch workflow with multiple commits
3. Simulated pull request process
4. Handled feedback simulation with additional commits
5. Practiced safe force pushing and upstream synchronization

EXECUTION STEPS:

1. REMOTE REPOSITORY SETUP

# Create bare repositories
mkdir company-repo && cd company-repo && git init --bare
cd ..
mkdir fork-repo && cd fork-repo && git init --bare

# Create local working repository
cd ..
mkdir local-repo && cd local-repo
git init
git config user.name "Разработчик"
git config user.email "developer@example.com"

# Add initial files
cat > calculator.js << 'EOF'
// Calculator module for Git workflow demonstration
class Calculator {
  constructor() { this.lastResult = 0; }
  add(a, b) { this.lastResult = a + b; return this.lastResult; }
  subtract(a, b) { this.lastResult = a - b; return this.lastResult; }
  multiply(a, b) { this.lastResult = a * b; return this.lastResult; }
  divide(a, b) {
    if (b === 0) throw new Error('Division by zero');
    this.lastResult = a / b; return this.lastResult;
  }
  getLastResult() { return this.lastResult; }
  reset() { this.lastResult = 0; }
}
module.exports = Calculator;
EOF

cat > package.json << 'EOF'
{
  "name": "calculator-project",
  "version": "1.0.0",
  "description": "Calculator project for Git workflow training",
  "main": "calculator.js",
  "scripts": { "test": "jest" },
  "devDependencies": { "jest": "^29.0.0" },
  "keywords": ["calculator", "git", "workflow"],
  "author": "Team",
  "license": "MIT"
}
EOF

# Initial commit
git add calculator.js package.json
git commit -m "Initial commit: Add Calculator class and package.json"

# Configure remotes
git remote add origin ../fork-repo
git remote add upstream ../company-repo
git push -u origin main

2. FEATURE BRANCH WORKFLOW

# Create feature branch
git checkout -b feature/add-scientific-functions

# Commit 1: Add scientific functions
# Updated calculator.js with power(), squareRoot(), factorial() methods
git add calculator.js
git commit -m "Add scientific functions: power, squareRoot, factorial"

# Commit 2: Add tests
# Created calculator.test.js with comprehensive test suite
git add calculator.test.js
git commit -m "Add comprehensive tests for scientific functions"

# Commit 3: Update package.json
# Added test:watch and test:coverage scripts
git add package.json
git commit -m "Update package.json with test scripts"

# Commit 4: Add usage example
# Created example.js demonstrating scientific functions
git add example.js
git commit -m "Add example.js demonstrating scientific functions"

# Push feature branch to fork
git push -u origin feature/add-scientific-functions

3. SIMULATE UPSTREAM CHANGES

# In company repository (simulating other developer)
git clone ../company-repo company-clone
cd company-clone
git config user.name "Другой Разработчик"
git config user.email "other@example.com"

# Add README.md
cat > README.md << 'EOF'
# Calculator Project
Advanced calculator with scientific functions for Git workflow training.
...
EOF

git add README.md
git commit -m "Add comprehensive README.md"
git push origin main

# Back to local repository
cd ../local-repo

# Sync with upstream
git fetch upstream
git merge upstream/main

4. HANDLE CODE REVIEW FEEDBACK

# Commit 5: Add input validation
# Updated calculator.js with type checking for scientific functions
git add calculator.js
git commit -m "Add input validation for scientific functions"

# Commit 6: Update tests
# Enhanced calculator.test.js with input validation tests
git add calculator.test.js
git commit -m "Update tests with input validation coverage"

# Safe force push
git push --force-with-lease origin feature/add-scientific-functions

5. SYNCHRONIZE FORK WITH UPSTREAM

git checkout main
git fetch upstream
git merge upstream/main
git push origin main

REMOTE CONFIGURATION:
git remote -v
Output:
origin    ../fork-repo (fetch)
origin    ../fork-repo (push)
upstream  ../company-repo (fetch)
upstream  ../company-repo (push)

FEATURE BRANCH WORKFLOW COMMANDS:

1. Branch Creation:
   git checkout -b feature/add-scientific-functions

2. Making Commits:
   # Make changes to files
   git add <files>
   git commit -m "Descriptive commit message"

3. Pushing to Fork:
   git push -u origin feature/add-scientific-functions

4. Syncing with Upstream:
   git fetch upstream
   git merge upstream/main

5. Force Pushing Safely:
   git push --force-with-lease origin feature/add-scientific-functions

6. Final Branch Status:
   git branch -avv

STRATEGY FOR HANDLING UPSTREAM CHANGES:

1. Regular Synchronization:
   - Fetch upstream changes frequently
   - Rebase feature branch onto updated main
   - Keep feature branch up-to-date

2. Conflict Resolution:
   - Resolve conflicts during rebase
   - Test thoroughly after conflict resolution
   - Push resolved changes

3. Communication:
   - Inform team when force pushing
   - Update PR description after major changes
   - Keep commit history clean

BEST PRACTICES FOR COMMIT MESSAGES:

1. Format:
   - Capitalize first letter
   - Use imperative mood ("Add" not "Added")
   - Keep first line under 50 characters
   - Add detailed description if needed

2. Content:
   - Describe what and why, not how
   - Reference issues/tickets when applicable
   - Separate subject from body with blank line

3. Examples of Good Commit Messages:
   - "Add scientific functions: power, squareRoot, factorial"
   - "Fix input validation for negative square roots"
   - "Update tests with edge case coverage"
   - "Refactor calculator class for better readability"

COMMIT HISTORY EXAMPLE:
git log --oneline --max-count=10
Output:
a1b2c3d Update tests with input validation coverage
d4e5f6a Add input validation for scientific functions
c7d8e9f Merge upstream/main into main
b0a1b2c Add example.js demonstrating scientific functions
a3b4c5d Update package.json with test scripts
d6e7f8a Add comprehensive tests for scientific functions
e9f0a1b Add scientific functions: power, squareRoot, factorial
f2a3b4c Initial commit: Add Calculator class and package.json

WORKFLOW SUMMARY:

1. Setup Phase:
   - Company repo (upstream)
   - Fork repo (origin)
   - Local working copy

2. Development Phase:
   - Create feature branch
   - Make incremental commits
   - Push to fork
   - Keep branch updated

3. Review Phase:
   - Address feedback
   - Add commits
   - Force push updates
   - Resolve conflicts

4. Integration Phase:
   - Sync with upstream
   - Prepare for merge
   - Clean up branch

VERIFICATION:
1. Multiple remotes configured   
2. Feature branch workflow implemented   
3. Pull request simulation completed   
4. Feedback handling demonstrated   
5. Safe force pushing practiced   
6. Upstream synchronization tested   

FINAL FILES:
1. calculator.js - Enhanced Calculator class with scientific functions
2. calculator.test.js - Comprehensive test suite
3. package.json - Updated npm scripts
4. example.js - Usage demonstration
5. README.md - Project documentation (from upstream)

ALL REQUIREMENTS SUCCESSFULLY COMPLETED.
