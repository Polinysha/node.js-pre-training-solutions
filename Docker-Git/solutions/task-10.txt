=== TASK 10 SOLUTION: Docker Networks and Data Persistence ===
Date: 2026-01-04 15:11:27
Author: Developer

OBJECTIVE:
Master Docker networking concepts and volume management for real-world applications.

EXECUTION:

1. CUSTOM NETWORK CREATION

docker network create app-network
docker network create --driver bridge --subnet 192.168.100.0/24 --gateway 192.168.100.1 isolated-network

docker network ls
docker network inspect app-network

2. MULTI-CONTAINER COMMUNICATION

docker volume create mongo-data

docker run -d --name mongodb --network app-network -v mongo-data:/data/db -e MONGO_INITDB_ROOT_USERNAME=admin -e MONGO_INITDB_ROOT_PASSWORD=secret mongo:7.0
docker run -d --name mongo-express --network app-network -p 8081:8081 -e ME_CONFIG_MONGODB_ADMINUSERNAME=admin -e ME_CONFIG_MONGODB_ADMINPASSWORD=secret -e ME_CONFIG_MONGODB_SERVER=mongodb mongo-express

cd node-app
docker build -t node-mongo-app .
docker run -d --name node-app --network app-network -p 3000:3000 node-mongo-app

3. VOLUME TYPES

docker volume create named-demo-volume

docker run -d --name volume-demo -v named-demo-volume:/data/volume -v /host/path/shared-data:/data/bind --tmpfs /data/tmpfs alpine tail -f /dev/null

4. NETWORK ISOLATION TESTING

docker run -d --name isolated-container --network isolated-network alpine tail -f /dev/null
docker run -d --name multi-network-container --network app-network alpine tail -f /dev/null
docker network connect isolated-network multi-network-container

5. TESTING

docker exec node-app nslookup mongodb
docker exec isolated-container ping -c 2 mongodb
docker exec multi-network-container ping -c 2 mongodb

curl http://localhost:3000/health
curl -X POST http://localhost:3000/items -H "Content-Type: application/json" -d '{"name":"Test","value":100}'
curl http://localhost:3000/items

6. DATA PERSISTENCE TEST

docker stop mongodb
docker start mongodb
curl http://localhost:3000/health

7. CLEANUP

docker stop mongodb mongo-express node-app isolated-container multi-network-container volume-demo
docker rm mongodb mongo-express node-app isolated-container multi-network-container volume-demo
docker network rm app-network isolated-network
docker volume rm mongo-data named-demo-volume
docker system prune -f

NETWORK TOPOLOGY:

app-network (172.19.0.0/16):
- mongodb:27017
- mongo-express:8081  
- node-app:3000

isolated-network (192.168.100.0/24):
- isolated-container

VOLUME TYPES:
- Named: mongo-data (persistent)
- Bind: /host/path/shared-data (shared)
- Tmpfs: /data/tmpfs (memory)

COMMANDS SUMMARY:

Network:
docker network create [name]
docker network ls
docker network inspect [name]
docker network rm [name]
docker network connect [network] [container]

Volume:
docker volume create [name]
docker volume ls
docker volume rm [name]
docker volume prune

Container:
docker run --network [name] -v [volume]:[path] --tmpfs [path]
docker exec [container] [command]
docker stop [container]
docker rm [container]

TEST RESULTS:

1. Network isolation:   
2. Multi-container communication:   
3. Volume persistence:   
4. Service discovery:   
5. Cleanup:   

ALL REQUIREMENTS COMPLETED.
